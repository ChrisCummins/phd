# Life Cycle

[Life Cycle](https://itunes.apple.com/us/app/life-cycle-track-your-time/id1064955217?mt=8)
is an iOS app for passive time tracking based on a phone's geolocation. By
sampling your phone's location periodically and grouping data into a series
of durations spent in different areas, it let's you label the areas with
categories, obtaining pretty minimal effort passive time tracking.

## Exported Data

Aggregating data from Life Cycle requires a manual export from the app. There
is a menu option to export a zipped CSV file of the app's database contents. The
exported CSV file uses the following schema:

```
START DATE(UTC)       Datetime encoded in "%Y-%m-%d %H:%M%S" format.
END DATE(UTC)         Datetime encoded in "%Y-%m-%d %H:%M%S" format.
START TIME(LOCAL)     Datetime encoded in "%Y-%m-%d %H:%M%S %Z" format.
END TIME(LOCAL)       Datetime encoded in "%Y-%m-%d %H:%M%S %Z" format.
DURATION              The difference between start and end time in seconds.
NAME (optional)       The "What did you do?" category name.
LOCATION (optional)   The "Where were you?" location name.
NOTE (optional)       The contents of the "notes" field.
```

For the three optional columns, if no value is present, the field is empty. The
file begins with a header containing the 8 columns names, followed by an empty
line.

Lines are delimited using Windows-style '\r\n' returns.

From what I can see, there is no quoting in the CSV, but I haven't tested what
happens if if `NAME`/`LOCATION`/`NOTE` fields contain commas.

The `START DATE` and `END DATE` for entries can be on different dates, and
durations can exceed 24 hours.

## Imported Data

The `SeriesCollection` proto generated by my `ProcessSeriesCollectionOrDie()`
functions contains one series for each `NAME`. The following schema is used:

```
Series.name                      ${NAME}"Time"
Series.family                    "TimeTracking"
Series.unit                      "milliseconds"
Measurement.group                ${LOCATION}, if set, else "default"
Measurement.ms_since_unix_epoch  ${START DATE} in milliseconds (see below).
Measurement.value                (end - start) in milliseconds (see below).
Measurement.source               "LifeCycle"
```

If the entry has a start date different from the end date, it is split into
multiple `Measurement`s, one per day. This is to ensure that summing the
measurements for a day is always <= 24 hours. For example, an entry has a start
date of `2017-01-01 18:00` and an end date of `2017-01-03 12:00` will produce
three measurements:

1.  `2017-01-01 18:00` - `2017-01-02 00:00`
2.  `2017-01-02 00:00` - `2017-01-03 00:00`
3.  `2017-01-03 00:00` - `2017-01-03 12:00`

The `NOTE` field is not exported.
